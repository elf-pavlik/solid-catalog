@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix : <#> .                      # SHACL Shapes
@prefix ex: <http://example.org/#> . # Data Classes & Properties
@prefix con: <catalog-skos.ttl#> .   # SKOS concept tree

@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .

: a owl:Ontology .

#####################
# LEARNING-RESOURCE #
#####################
:LearningResourceShape a sh:NodeShape ;
  sh:name "Learning Resource"@en;
  sh:targetClass ex:LearningResource ;
  sh:property :nameShape ;
  sh:property :learningResourceSubtypeShape;
  sh:property :learningResourceDescriptionShape ;
  sh:property :technicalKeywordShape ;
  sh:property :landingPageShape .

#########
# EVENT #
#########
:EventShape a sh:NodeShape ;
  sh:name "Event"@en;
  sh:targetClass ex:Event ;
  sh:property :nameShape ;
  sh:property :descriptionShape ;
  sh:property :eventAboutShape ;
  sh:property :providerShape ;
  sh:property :scheduleShape ;
  sh:property :videoCallPageShape ;
  sh:property :landingPageShape .

###########
# SERVICE #
###########
:ServiceShape a sh:NodeShape ;
  sh:targetClass ex:Service;
  sh:name "Service"@en;
  sh:property :nameShape ;
  sh:property :serviceSubtypeShape ;
  sh:property :statusShape ;
  sh:property :descriptionShape ;
  sh:property :emailShape ;
  sh:property :logoShape ;
  sh:property :landingPageShape ;
  sh:property :repositoryShape ;
  sh:property :serviceEndpointShape ;
  sh:property :providerShape ;
  sh:property :socialKeywordShape ;
  sh:property :serviceBackendShape ;
  sh:property :serviceFrontendShape ;
  sh:property :serviceAudienceShape .

###########
# PRODUCT #
###########
:ProductShape a sh:NodeShape ;
  sh:name "Product"@en;
  sh:targetClass ex:Product ;
  sh:property :nameShape ;
  sh:property :productSubtypeShape ;
  sh:property :partOfShape ;
  sh:property :statusShape ;
  sh:property :emailShape ;
  sh:property :descriptionShape ;
  sh:property :clientIDShape ;
  sh:property :logoShape ;
  sh:property :landingPageShape ;
  sh:property :repositoryShape ;
  sh:property :webAppEndpointShape ;
  sh:property :providerShape ;
  sh:property :socialKeywordShape ;
  sh:property :technicalKeywordShape .
  
#################
# SPECIFICATION #
#################
:SpecificationShape a sh:NodeShape ;
  sh:name "Specification"@en;
  sh:targetClass ex:Specification ;
  sh:property :nameShape ;
  sh:property :descriptionShape ;
  sh:property :repositoryShape ;
  sh:property :landingPageShape .

############
# ONTOLOGY #
############
:OntologyShape a sh:NodeShape ;
  sh:name "Ontology"@en;
  sh:targetClass ex:Ontology ;
  sh:property :nameShape ;
  sh:property :descriptionShape ;
  sh:property :namespaceURIShape ;
  sh:property :prefixShape .

################
# ORGANIZATION #
################
:OrganizationShape a sh:NodeShape ;
  sh:name "Organization"@en;
  sh:targetClass ex:Organization ;
  sh:property :nameShape ;
  sh:property :organizationSubtypeShape ;
  sh:property :emailShape ;
  sh:property :descriptionShape ;
  sh:property :logoShape ;
  sh:property :landingPageShape ;
  sh:property :repositoryShape ;
  sh:property :socialKeywordShape ;
  sh:property :resourcesWantedShape ;
  sh:property :resourcesOfferedShape .

##########
# PERSON #
##########
:PersonShape a sh:NodeShape ;
  sh:name "Person"@en;
  sh:targetClass ex:Person ;
  sh:property :nameShape ;
  sh:property :emailShape ;
  sh:property :webidShape ;
  sh:property :forumHandleShape ;
  sh:property :matrixHandleShape ;
  sh:property :descriptionShape ;
  sh:property :logoShape ;
  sh:property :landingPageShape ;
  sh:property :repositoryShape ;
  sh:property :resourcesWantedShape ;
  sh:property :resourcesOfferedShape .

###################
# Property Shapes #
###################

:nameShape a sh:PropertyShape ;
  sh:path ex:name ;
  sh:name "name"@en;
  sh:datatype xsd:string ;
  sh:minCount 1 ;
  sh:maxCount 1 .

:statusShape a sh:PropertyShape ;
  sh:path ex:status ;
  sh:name "status"@en;
  sh:in (
    con:Exploration
    con:Development
    con:Production
    con:Archived
  ) ;
  sh:minCount 1 ;
  sh:maxCount 1 .

:descriptionShape a sh:PropertyShape ;
  sh:path ex:description ;
  sh:name "description"@en;
  sh:datatype xsd:string ;
  sh:maxLength 280 ;
  sh:maxCount 1 .

:emailShape a sh:PropertyShape ;
  sh:path ex:contactEmail ;
  sh:name "contact email"@en;
  sh:datatype xsd:string ;
  sh:pattern "^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+.[a-zA-Z]{2,}$" ;
  sh:description "if you wish to share the email privately to ODI, leave this blank & contact solid@theodi.org" ;
  sh:maxCount 1 .

:logoShape a sh:PropertyShape ;
  sh:path ex:logo ;
  sh:name "logo"@en;
  sh:datatype xsd:anyURI ;
  sh:maxCount 1 .

:landingPageShape a sh:PropertyShape ;
  sh:path ex:landingPage ;
  sh:name "landing page"@en;
  sh:datatype xsd:anyURI ;
  sh:maxCount 1 .

:repositoryShape a sh:PropertyShape ;
  sh:path ex:repository ;
  sh:name "repository"@en;
  sh:datatype xsd:anyURI ;
  sh:maxCount 1 .

:providerShape a sh:PropertyShape ;
  sh:path ex:provider ;
  sh:name "provider"@en;
  sh:description "comma-separated list of name(s) of Person(s) and/or Organization(s)" ;
  sh:datatype xsd:string . # will become URL of Person or Organization

:socialKeywordShape a sh:PropertyShape ;
  sh:name "social keyword"@en;
  sh:path ex:socialKeyword ;
  sh:datatype xsd:string ;
  sh:description "comma-separated list for specialized services e.g. housing, transportation, name of an industry";
  sh:zeroOrMore true .

:technicalKeywordShape a sh:PropertyShape ;
  sh:name "technical keyword"@en;
  sh:path ex:technicalKeyword ;
  sh:description "comma-separated list for product type e.g. game, calendar, contacts manager" ;
  sh:datatype xsd:string ;
  sh:zeroOrMore true .

:resourcesOfferedShape a sh:PropertyShape ;
  sh:path ex:resourcesOffered ;
  sh:name "resources offered"@en ;
  sh:datatype xsd:string ;
  sh:maxLength 280 ;
  sh:description "funding, mentorship, collaboration, offered; separate multiple with a blank line" .

:resourcesWantedShape a sh:PropertyShape ;
  sh:path ex:resourcesWanted ;
  sh:name "resources wanted"@en ;
  sh:datatype xsd:string ;
  sh:maxLength 280 ;
  sh:description "funding, employees, interns, partners, separate multiple with a blank line" .

:serviceSubtypeShape a sh:PropertyShape ;
  sh:path ex:subType ;
  sh:name "subtype"@en;
  sh:in (  
    con:GeneralPurposePodService
    con:SpecializedPodService
    con:CommunicationService
    con:IdentityService
    con:StorageService
  ) ;
  sh:minCount 1 ;
  sh:maxCount 1 .

:serviceEndpointShape a sh:PropertyShape ;
    sh:path ex:serviceEndpoint ;
    sh:name "service endpoint"@en;
    sh:datatype xsd:anyURI ;
    sh:maxCount 1 .

:serviceBackendShape a sh:PropertyShape ;
    sh:path ex:serviceBackend ;
    sh:name "service backend"@en;
    sh:description "name of server software (e.g. ESS for inrupt.com)";
    sh:datatype xsd:string . # will become URL of a Product

:serviceFrontendShape a sh:PropertyShape ;
    sh:path ex:serviceFrontend ;
    sh:name "service frontend"@en;
    sh:description "name of server frontend (e.g. SolidOS or Penny)";
    sh:datatype xsd:string . # will become URL of a Product

:serviceAudienceShape a sh:PropertyShape ;
    sh:path ex:serviceAudience ;
    sh:name "service audience"@en;
    sh:datatype xsd:string ;
    sh:description "for targeted Pod Services only; e.g. 'citizens of Belgium' or 'Yarrabah community'" ;
    sh:maxCount 1 .

:organizationSubtypeShape a sh:PropertyShape ;
    sh:path ex:subType ;
    sh:name "subtype" ;
    sh:in (
      con:Company
      con:GovernmentalOrganization
      con:UniversityProject
      con:OpenSourceProject
      con:FundingOrganization
      con:OtherNGO
    ) ;
    sh:minCount 1 ;
    sh:maxCount 1 .

:webidShape a sh:PropertyShape ;
    sh:path ex:webid ;
    sh:name "WebID" ;
    sh:datatype xsd:string ;
    sh:maxCount 1 .

:forumHandleShape a sh:PropertyShape ;
    sh:path ex:forumHandle ;
    sh:name "forum handle" ;
    sh:datatype xsd:string ;
    sh:description "your handle/nick on the Solid Forum" ;
    sh:maxCount 1 .

:matrixHandleShape a sh:PropertyShape ;
    sh:path ex:matrixHandle ;
    sh:name "matrix handle" ;
    sh:description "your handle/nick in the Matrix chatrooms" ;
    sh:datatype xsd:string ;
    sh:maxCount 1 .

:learningResourceSubtypeShape a sh:PropertyShape ;
    sh:path ex:subType ;
    sh:in (
      con:Tutorial
      con:ResearchPaper
      con:Explainer
      con:SpecificationSupplement
      con:OtherLearningResource
    ) ;
    sh:minCount 1 ;
    sh:maxCount 1 .

:learningResourceDescriptionShape a sh:PropertyShape ;
    sh:path ex:about ;
    sh:name "about" ;
    sh:description "the product or topic of the learning resource" ;
    sh:datatype xsd:anyURI ;
    sh:maxCount 1 .

:eventAboutShape a sh:PropertyShape ;
    sh:path ex:about ;
    sh:name "about" ;
    sh:description "the product or topic of the learning resource" ;
    sh:datatype xsd:anyURI ;
    sh:maxCount 1 .

:scheduleShape a sh:PropertyShape ;
    sh:path ex:schedule ;
    sh:name "schedule" ;
    sh:datatype xsd:string ;
    sh:maxCount 1 .

:videoCallPageShape a sh:PropertyShape ;
    sh:name "video call URL" ;
    sh:path ex:videoCallPage ;
    sh:datatype xsd:anyURI ;
    sh:maxCount 1 .

:namespaceURIShape a sh:PropertyShape ;
    sh:path ex:namespaceURI ;
    sh:name "namespace URL" ;
    sh:description "e.g. http://www.w3.org/ns/shacl#" ;
    sh:datatype xsd:anyURI ;
    sh:maxCount 1 .

:prefixShape a sh:PropertyShape ;
    sh:path ex:prefix ;
    sh:name "prefix" ;
    sh:description "e.g. sh: for the SHACL ontology" ;
    sh:datatype xsd:string ;
    sh:maxCount 1 .

:productSubtypeShape a sh:PropertyShape ;
    sh:path ex:subType ;
    sh:name "subtype" ;
    sh:or (
      con:ProductivityApp
      con:LeisureApp
      con:PodApp
      con:OtherApp
      con:PodServer
      con:ServerPlugin
      con:SoftwareLibrary
    ) ;
    sh:minCount 1 ;
    sh:maxCount 1 .

:partOfShape a sh:PropertyShape ;
   sh:path ex:partOf ;
   sh:name "part of" ;
   sh:description "for ServerPlugin/Component, name of server; for other product, name of software product is part of" ;
   sh:datatype xsd:string .

:clientIDShape a sh:PropertyShape ;
    sh:name "ClientID" ;
    sh:path ex:clientID ;
    sh:datatype xsd:string ;
    sh:description "an OIDC ClientID, if available" ;
    sh:maxCount 1.

:webAppEndpointShape a sh:PropertyShape ;
    sh:path ex:webAppEndpoint ;
    sh:name "Webapp URL" ;
    sh:description "URL of an app that can be run from an online endpoint" ;
    sh:datatype xsd:anyURI ;
    sh:maxCount 1 .
